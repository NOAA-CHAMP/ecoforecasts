1;
% SCRIPT to dump a CSV-format table of upwelling monitoring locations and
% variables (suitable for "Table 1" of the CRCP Upwelling report) to a file
% CSVFNAME (DEFAULT: GET_CORAL_PATH/CRCP/Upwelling/CoRIS/upwelling_sites.csv)
%
% Last Saved Time-stamp: <Thu 2018-03-22 20:51:04 Eastern Daylight Time gramer>

if ( ~exist('datapath','var') )
  datapath = fullfile(get_coral_path,'CRCP','Upwelling','CoRIS');
end;

%fid = 2;
if ( ~exist('csvfname','var') )
  csvfname = fullfile(datapath,['upwelling_sites.csv']);
end;

if ( ~ischar(csvfname) )
  fid = csvfname;
else
  fid = fopen(csvfname,'w+');
  if ( fid < 0 )
    error('Unable to open %s',csvfname);
  end;
end;

fprintf(fid,'Program,Station,Type,Lon.,Lat.,Depth=m,Data,Summer,Description\n');

fprintf(fid,'C-MAN,CANF1,Buoy,%.04f,%.04f,%.1f,"%s"\n',canf1.lon,canf1.lat,canf1.depth,...
        'T,S,Hs,met.','''88-''17','Cape Canaveral buoy #41009');
fprintf(fid,'C-MAN,CNNF1,Buoy,%.04f,%.04f,%.1f,"%s"\n',cnnf1.lon,cnnf1.lat,cnnf1.depth,...
        'T,Hs','''08-''17','Cape Canaveral buoy #41113');
fprintf(fid,'FDEP,"K",Pier,%.04f,%.04f,%.1f,"%s"\n',fdepk.lon,fdepk.lat,0,...
        'T,S,.met.','''11-''17','St. Lucie Inlet');
fprintf(fid,'C-MAN,FTPF1,Buoy,%.04f,%.04f,%.1f,"%s"\n',ftpf1.lon,ftpf1.lat,ftpf1.depth,...
        'T,Hs,met.','''06-''17','Ft. Pierce buoy #41114');
fprintf(fid,'C-MAN,LKWF1,Pier,%.04f,%.04f,%.1f,"%s"\n',lkwf1.lon,lkwf1.lat,lkwf1.depth,...
        'T,met.','''84-''17','Lake Worth');
fprintf(fid,'C-MAN,PVGF1,Pier,%.04f,%.04f,%.1f,"%s"\n',pvgf1.lon,pvgf1.lat,pvgf1.depth,...
        'T,met.','''09-''17','Port Everglades');
fprintf(fid,'C-MAN,FWYF1,Light,%.04f,%.04f,%.1f,"%s"\n',fwyf1.lon,fwyf1.lat,fwyf1.depth,...
        'T,met.','''91-''17','Fowey Rocks');
fprintf(fid,'RSMAS,RSM,Roof,%.04f,%.04f,%.1f,"%s"\n',-80.1634,25.7318,0,...
        'Met.','''03-''11','Rooftop Met. Observatory');

fprintf(fid,'SEFCRI,UPDB,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.updb.lon,sefcri.updb.lat,sefcri.updb.depth,...
        'T','''10-''13','Monroe: Upside-Down Barge');
fprintf(fid,'SEFCRI,SLIB,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.slib.lon,sefcri.slib.lat,sefcri.slib.depth,...
         'T','''10-''13','Monroe: St. Lucie Inlet Barge');
fprintf(fid,'SEFCRI,EVCA,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.evca.lon,sefcri.evca.lat,sefcri.evca.depth,...
         'T','''12-''13','Monroe: Evans-Crary reef');
fprintf(fid,'SEFCRI,MC2,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.mc2.lon,sefcri.mc2.lat,sefcri.mc2.depth,...
         'T','''10-''13','Monroe County shallow');
fprintf(fid,'SEFCRI,PB2,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.pb2.lon,sefcri.pb2.lat,sefcri.pb2.depth,...
         'T','''10-''13','Palm Beach County offshore');
fprintf(fid,'SEFCRI,PB1,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.pb1.lon,sefcri.pb1.lat,sefcri.pb1.depth,...
         'T','''10-''13','Palm Beach County inshore');
fprintf(fid,'SEFCRI,BC3,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.bc3.lon,sefcri.bc3.lat,sefcri.bc3.depth,...
         'T','''10-''13','Broward County offshore');
fprintf(fid,'SEFCRI,BC1,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.bc1.lon,sefcri.bc1.lat,sefcri.bc1.depth,...
         'T','''10-''12','Broward County inshore');
fprintf(fid,'SEFCRI,DC3,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.dc3.lon,sefcri.dc3.lat,sefcri.dc3.depth,...
         'T','''10-''13','Miami-Dade County offshore');
fprintf(fid,'SEFCRI,DC1,Moor.,%.04f,%.04f,%.1f,"%s"\n',sefcri.dc1.lon,sefcri.dc1.lat,sefcri.dc1.depth,...
         'T','''10-''13','Miami-Dade County inshore');

fprintf(fid,'SFOMC,NE/E,Buoy,%.04f,%.04f,%.1f,"%s"\n',sfomc.ne_buoy.lon,sfomc.ne_buoy.lat,sfomc.ne_buoy.depth,...
        'T,S,u,v','''99-''00','Northeast/East SFOMC Buoy');
fprintf(fid,'SFOMC,C,Buoy,%.04f,%.04f,%.1f,"%s"\n',sfomc.c_buoy.lon,sfomc.c_buoy.lat,sfomc.c_buoy.depth,...
        'T,S,u,v','''00','Central SFOMC Buoy');
fprintf(fid,'SFOMC,SE,Buoy,%.04f,%.04f,%.1f,"%s"\n',sfomc.se_buoy.lon,sfomc.se_buoy.lat,sfomc.se_buoy.depth,...
        'T,S','--','Southeast SFOMC Buoy');
fprintf(fid,'SFOMC,SW,Buoy,%.04f,%.04f,%.1f,"%s"\n',sfomc.sw_buoy.lon,sfomc.sw_buoy.lat,sfomc.sw_buoy.depth,...
        'T,S,u,v','''99','Southwest SFOMC Buoy');
fprintf(fid,'SFOMC,NW/W,Moor.,%.04f,%.04f,%.1f,"%s"\n',sfomc.nw_w_btm.lon,sfomc.nw_w_btm.lat,sfomc.nw_w_btm.depth,...
        'T,S,u,v,Hs','''99-''11','Northwest/West Mooring');

fprintf(fid,'FACE,Shallow,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.shallow.lon,face.shallow.lat,face.shallow.depth,...
        'T,u,v','''14-''15','HWD inshore ADCP');
fprintf(fid,'FACE,TCM1,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.tcm1.lon,face.tcm1.lat,face.tcm1.depth,...
        'T,u,v','''15','HWD Tilt Current Meter 1');
fprintf(fid,'FACE,TCM2,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.tcm2.lon,face.tcm2.lat,face.tcm2.depth,...
        'T,u,v','''15','HWD Tilt Current Meter 2');
fprintf(fid,'FACE,Deep,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.deep.lon,face.deep.lat,face.deep.depth,...
        'T,u,v','''14-''15','HWD offshore ADCP');
fprintf(fid,'FACE,Brwd20,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.brwd20.lon,face.brwd20.lat,face.brwd20.depth,...
        'T,L','''09','Broward 20 m Mooring');
fprintf(fid,'FACE,Brwd40,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.brwd40.lon,face.brwd40.lat,face.brwd40.depth,...
        'T','''09','Broward 40 m Mooring');
fprintf(fid,'FACE,Brwd100,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.brwd100.lon,face.brwd100.lat,face.brwd100.depth,...
        'T,u,v','''09','Broward 100 m Mooring');
fprintf(fid,'FACE,Boca20,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.boca20.lon,face.boca20.lat,face.boca20.depth,...
        'T','''09','Boca Raton 20 m Mooring');
fprintf(fid,'FACE,Boca40,Moor.,%.04f,%.04f,%.1f,"%s"\n',face.boca40.lon,face.boca40.lat,face.boca40.depth,...
        'T','''09','Boca Raton 40 m Mooring');

if ( fid>2 )
  fclose(fid);
end;
